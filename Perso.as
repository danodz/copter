package  {	import flash.display.MovieClip;	import flash.events.KeyboardEvent;		public class Perso extends MovieClip	{		private var gauche : Boolean = false;		private var right : Boolean = false;		private var haut : Boolean = false;				private var saut : Boolean;		private var sautMur : Boolean = false;				private var velX : Number = 0;		private var velY : Number = 0;				public function Perso() 		{			stop();						scaleX = 0.1;			scaleY = 0.1;						x = 250;			y = 328;		}				public function update()		{			//Modification de la vélocité en x et y			if(gauche)				velX -= 1;						if(right)				velX += 1;						if(haut && saut)			{				velY = -7;				saut = false;			}						//délimitation du terrain (mur et plancher)			if(y >= 328)			{				y = 328;				saut = true;								if(!haut)					velY = 0;			}						if(x <= 0 + width/2 && y >= 325)			{				x = 0 + width/2 + 1;				velX = 0;			}						if(x >= stage.stageWidth - width/2 && y >= 325)			{				x = stage.stageWidth - width/2;				velX = 0;			}						//limitation de la vélocité			if(velX > 8)				velX = 8;							if(velX < -8)				velX = -8;							if((velX > -0.7 && velX < 0) || (velX < 0.7 && velX > 0))			{				velX = 0;			}						//altération de la vélocité par la physique			velX *= 0.9;						if(y < 325)				velY += 0.7;						//application de la vélocité aux positions x et y			x += velX;			y += velY;						//changement de frame pour que l'apparence du personnage suive son mouvent			if(velX == 0)			{				gotoAndStop(1);			}			else if(velX > 0)			{				gotoAndStop(2);				scaleX = 0.1;			}			else if(velX < 0)			{				gotoAndStop(2);				scaleX = -0.1;			}						if(y < 325)			{				gotoAndStop(3);								if(x <= 0 + width/2 + 1)				{					velX = 0;					gotoAndStop(4);					x = 0 + width/2;										sautMur = true;				}								if(x > stage.stageWidth - width/2 + 1)				{					velX = 0;					gotoAndStop(4);					x = stage.stageWidth - width/2;										sautMur = true;				}			}						//les sauts au mur			if(sautMur && haut)			{				velX = 130 * -scaleX;				velY = -17;				sautMur = false;			}						//plateforme dans les airs			if(x > 175 && x < 383 && y <= 137 && y >= 122 )			{				saut = true;				y = 122;				velY = 0;				if(velX == 0)				{					gotoAndStop(1);				}				else if(velX > 0)				{					gotoAndStop(2);					scaleX = 0.1;				}				else if(velX < 0)				{					gotoAndStop(2);					scaleX = -0.1;				}			}		}				//fonction qui attribue les touches du clavier à des variables booléenne		//et qui gère les évènements de clavier en général		public function etablirDirections(e : KeyboardEvent):void		{			if (e.keyCode == 37 && e.type == KeyboardEvent.KEY_DOWN)			{				gauche = true;			}			if(e.keyCode == 37 && e.type == KeyboardEvent.KEY_UP)			{				gauche = false;			}						if (e.keyCode == 39 && e.type == KeyboardEvent.KEY_DOWN)			{				right = true;			}			if (e.keyCode == 39 && e.type == KeyboardEvent.KEY_UP)			{				right = false;			}						if (e.keyCode == 38 && e.type == KeyboardEvent.KEY_DOWN)			{				haut = true;			}			if (e.keyCode == 38 && e.type == KeyboardEvent.KEY_UP)			{				haut = false;			}						if((e.keyCode == 32 || e.keyCode == 40) && x > 175 && x < 383 && y == 122)			{				(parent as EcranTitre).debuterJeu(e);			}		}	}	}